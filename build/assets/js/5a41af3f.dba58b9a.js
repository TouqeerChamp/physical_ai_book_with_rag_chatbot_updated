"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[534],{7667:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"chapter-03-ros2","title":"Chapter 3: ROS 2 Basics","description":"Core Concepts","source":"@site/docs/chapter-03-ros2.md","sourceDirName":".","slug":"/chapter-03-ros2","permalink":"/physical-ai-book/chapter-03-ros2","draft":false,"unlisted":false,"editUrl":"https://github.com/TouqeerChamp/docs/chapter-03-ros2.md","tags":[],"version":"current","frontMatter":{"title":"Chapter 3: ROS 2 Basics","sidebar_label":"3. ROS 2 Basics"},"sidebar":"tutorialSidebar","previous":{"title":"Hardware Lab Setup","permalink":"/physical-ai-book/chapter-02-hardware"},"next":{"title":"4. Computer Vision","permalink":"/physical-ai-book/chapter-04-vision"}}');var r=s(4848),a=s(8453);const l={title:"Chapter 3: ROS 2 Basics",sidebar_label:"3. ROS 2 Basics"},t="Chapter 3: ROS 2 Basics",o={},c=[{value:"Core Concepts",id:"core-concepts",level:2},{value:"<strong>Nodes</strong>",id:"nodes",level:3},{value:"<strong>Topics</strong>",id:"topics",level:3},{value:"<strong>Messages</strong>",id:"messages",level:3},{value:"Publisher/Subscriber Communication Model",id:"publishersubscriber-communication-model",level:2},{value:"Setting Up Your ROS 2 Workspace",id:"setting-up-your-ros-2-workspace",level:2},{value:"Creating the Workspace",id:"creating-the-workspace",level:3},{value:"Creating the Publisher and Subscriber",id:"creating-the-publisher-and-subscriber",level:2},{value:"Publisher Node (Talker)",id:"publisher-node-talker",level:3},{value:"Subscriber Node (Listener)",id:"subscriber-node-listener",level:3},{value:"Package Configuration",id:"package-configuration",level:3},{value:"Setup Configuration",id:"setup-configuration",level:3},{value:"Building and Running the Example",id:"building-and-running-the-example",level:2},{value:"Validating the Communication",id:"validating-the-communication",level:2},{value:"Checking Active Nodes",id:"checking-active-nodes",level:3},{value:"Viewing Available Topics",id:"viewing-available-topics",level:3},{value:"Monitoring Messages on a Topic",id:"monitoring-messages-on-a-topic",level:3},{value:"Running Both Nodes Simultaneously",id:"running-both-nodes-simultaneously",level:3},{value:"Troubleshooting Tips",id:"troubleshooting-tips",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-3-ros-2-basics",children:"Chapter 3: ROS 2 Basics"})}),"\n",(0,r.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 (Robot Operating System 2) is a flexible framework for writing robot software. At its heart lies a distributed computing architecture that enables different processes to communicate seamlessly."}),"\n",(0,r.jsx)(n.h3,{id:"nodes",children:(0,r.jsx)(n.strong,{children:"Nodes"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Nodes"})," are the fundamental building blocks of a ROS 2 system. Think of them as individual brain cells or organs in a living organism - each performing a specific function:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A camera driver node captures images"}),"\n",(0,r.jsx)(n.li,{children:"A motion planner node computes navigation paths"}),"\n",(0,r.jsx)(n.li,{children:"A sensor fusion node combines data from various sensors"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Nodes are individual executables that perform specific functions and communicate with other nodes in the network."}),"\n",(0,r.jsx)(n.h3,{id:"topics",children:(0,r.jsx)(n.strong,{children:"Topics"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Topics"})," serve as the communication channels between nodes. They're like the neural pathways in a nervous system that carry signals between different parts of the body:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Publishers send data to topics"}),"\n",(0,r.jsx)(n.li,{children:"Subscribers receive data from topics"}),"\n",(0,r.jsx)(n.li,{children:"Multiple nodes can publish to or subscribe from the same topic"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"messages",children:(0,r.jsx)(n.strong,{children:"Messages"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Messages"})," are the actual data structures that travel between nodes via topics. These are standardized data formats that ensure all nodes understand the information being shared."]}),"\n",(0,r.jsx)(n.h2,{id:"publishersubscriber-communication-model",children:"Publisher/Subscriber Communication Model"}),"\n",(0,r.jsx)(n.p,{children:"The most common communication pattern in ROS 2 is the publisher/subscriber model. One node publishes data to a topic, and other nodes can subscribe to that topic to receive the data."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'sequenceDiagram\n    participant T as Talker Node\n    participant Topic as /topic\n    participant L as Listener Node\n    \n    T->>Topic: Publish "Hello World"\n    Topic->>L: Deliver message\n    Note over T,L: Communication via /topic\n'})}),"\n",(0,r.jsx)(n.h2,{id:"setting-up-your-ros-2-workspace",children:"Setting Up Your ROS 2 Workspace"}),"\n",(0,r.jsx)(n.p,{children:"A workspace is a directory where you will develop ROS 2 packages. Let's create and set up your first workspace:"}),"\n",(0,r.jsx)(n.h3,{id:"creating-the-workspace",children:"Creating the Workspace"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create the workspace directory structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Navigate to your workspace:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Build the workspace:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"colcon build\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Source the setup file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"colcon build"})," command compiles all the packages in your workspace. The ",(0,r.jsx)(n.code,{children:"source install/setup.bash"})," command sets up your environment so ROS 2 can find your packages."]}),"\n",(0,r.jsx)(n.h2,{id:"creating-the-publisher-and-subscriber",children:"Creating the Publisher and Subscriber"}),"\n",(0,r.jsx)(n.p,{children:"Now let's create a simple publisher and subscriber to demonstrate ROS 2 communication."}),"\n",(0,r.jsx)(n.h3,{id:"publisher-node-talker",children:"Publisher Node (Talker)"}),"\n",(0,r.jsx)(n.p,{children:'First, let\'s create a publisher node that sends "Hello World" messages:'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_publisher = MinimalPublisher()\n\n    rclpy.spin(minimal_publisher)\n\n    # Destroy the node explicitly\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Save this as ",(0,r.jsx)(n.code,{children:"publisher_member_function.py"})," in the ",(0,r.jsx)(n.code,{children:"~/ros2_ws/src/py_pubsub/py_pubsub"})," directory."]}),"\n",(0,r.jsx)(n.h3,{id:"subscriber-node-listener",children:"Subscriber Node (Listener)"}),"\n",(0,r.jsx)(n.p,{children:"Next, let's create a subscriber node that listens to the messages:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_subscriber = MinimalSubscriber()\n\n    rclpy.spin(minimal_subscriber)\n\n    # Destroy the node explicitly\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Save this as ",(0,r.jsx)(n.code,{children:"subscriber_member_function.py"})," in the same directory."]}),"\n",(0,r.jsx)(n.h3,{id:"package-configuration",children:"Package Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["To create a ROS 2 package, you'll need a ",(0,r.jsx)(n.code,{children:"package.xml"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>py_pubsub</name>\n  <version>0.0.0</version>\n  <description>Python pubsub example</description>\n  <maintainer email="you@example.com">Your Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n\n  <exec_depend>rosidl_default_runtime</exec_depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"setup-configuration",children:"Setup Configuration"}),"\n",(0,r.jsx)(n.p,{children:"You'll also need a setup.py file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nfrom glob import glob\nimport os\n\npackage_name = 'py_pubsub'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[],\n    py_modules=[\n        'py_pubsub.publisher_member_function',\n        'py_pubsub.subscriber_member_function',\n    ],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        (os.path.join('share', package_name, 'launch'), glob('launch/*launch.[pxy][yma]*')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='you@example.com',\n    description='Python pubsub example',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'talker = py_pubsub.publisher_member_function:main',\n            'listener = py_pubsub.subscriber_member_function:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"building-and-running-the-example",children:"Building and Running the Example"}),"\n",(0,r.jsx)(n.p,{children:"After creating the files, navigate to your workspace and rebuild:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build\n"})}),"\n",(0,r.jsx)(n.p,{children:"Source the setup file to reload your workspace:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validating-the-communication",children:"Validating the Communication"}),"\n",(0,r.jsx)(n.p,{children:"To verify that everything is working properly, we can use several command-line tools:"}),"\n",(0,r.jsx)(n.h3,{id:"checking-active-nodes",children:"Checking Active Nodes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,r.jsx)(n.p,{children:"This command will show all currently active nodes in the ROS 2 system."}),"\n",(0,r.jsx)(n.h3,{id:"viewing-available-topics",children:"Viewing Available Topics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,r.jsx)(n.p,{children:"This command will show all currently available topics in the ROS 2 system."}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-messages-on-a-topic",children:"Monitoring Messages on a Topic"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /topic\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This command listens to the messages being published on the ",(0,r.jsx)(n.code,{children:"/topic"})," topic."]}),"\n",(0,r.jsx)(n.h3,{id:"running-both-nodes-simultaneously",children:"Running Both Nodes Simultaneously"}),"\n",(0,r.jsx)(n.p,{children:"To run the publisher and subscriber simultaneously:"}),"\n",(0,r.jsx)(n.p,{children:"Terminal 1:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run py_pubsub talker\n"})}),"\n",(0,r.jsx)(n.p,{children:"Terminal 2:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run py_pubsub listener\n"})}),"\n",(0,r.jsx)(n.p,{children:'If everything is configured correctly, you should see the publisher sending "Hello World" messages and the subscriber receiving them.'}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-tips",children:"Troubleshooting Tips"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Make sure the workspace is sourced in each terminal: ",(0,r.jsx)(n.code,{children:"source ~/ros2_ws/install/setup.bash"})]}),"\n",(0,r.jsx)(n.li,{children:"Check that package names and file paths are correct"}),"\n",(0,r.jsxs)(n.li,{children:["Verify that you've built your workspace after making changes: ",(0,r.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,r.jsx)(n.li,{children:"Ensure the talker and listener are publishing to and subscribing from the same topic name"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(6540);const r={},a=i.createContext(r);function l(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);